<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Crypto Indicators</title>

    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/indicator.css}">
</head>
<body>

<header class="topbar">
    <nav class="nav">
        <div class="nav-left">
            <a class="brand" th:href="@{/home}">PulseX</a>
            <a sec:authorize="isAuthenticated()" th:href="@{/trade}">Trade</a>
            <a sec:authorize="isAuthenticated()" th:href="@{/dashboard}">Dashboard</a>
            <a sec:authorize="isAuthenticated()" th:href="@{/indicator} " class="active">Indicators</a>
            <a sec:authorize="hasRole('ADMIN')" th:href="@{/admin/dashboard}">Admin</a>
            <a sec:authorize="isAuthenticated()" th:href="@{/profile}">Profile</a>
        </div>


        <ul class="nav-right" sec:authorize="isAnonymous()">
            <li><a th:href="@{/Login}">Login</a></li>
            <li><a th:href="@{/Register}">Register</a></li>
        </ul>


        <ul class="nav-right" sec:authorize="isAuthenticated()">
            <li class="user">
                <span sec:authentication="name"></span>

            </li>
            <li>

                <form th:action="@{/logout}" method="post" style="display:inline">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                    <button type="submit" class="linklike">Logout</button>
                </form>
            </li>
        </ul>
    </nav>
</header>

<main>
    <div class="app">
        <header class="header">
            <h1>Crypto Indicators</h1>
            <p>
                Indicators + level (low / medium / high) + trend (up / down / neutral)
            </p>
        </header>

        <!-- FORM -->
        <section class="form-section">
            <div class="field">
                <label for="symbol">Symbol</label>
                <input id="symbol" type="text" value="BTCUSDT">
            </div>

            <button id="loadBtn">Load</button>
            <span id="statusText" class="status-text">Auto update every 10 seconds</span>
        </section>

        <!-- TABLE -->
        <section class="table-section">
            <table class="ind-table">
                <thead>
                <tr>
                    <th>Indicator</th>
                    <th>Value</th>
                    <th>Level</th>
                    <th>Trend</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody id="indicatorBody"></tbody>
            </table>
        </section>

        <div class="hint">
            <span class="dot low"></span> low
            <span class="dot med"></span> medium
            <span class="dot high"></span> high
            <span class="sep">•</span>
            ↑ up → neutral ↓ down
        </div>
    </div>
</main>

<script src="/js/indicator/indicator.js"></script>
</body>
</html>
